<div class="max-w-3xl w-full h-full mx-auto pt-5 pb-7">
  <div class="w-auto h-full bg-white mx-20 mt-6 p-3 rounded-xl">
    <div class="flex justify-center items-center p-3 mt-5">
      <div class="text-3xl font-semibold">Users</div>
      <img [ngSrc]="imgSrc2" alt="" width="30" height="30" class="ml-6" />
      <img [ngSrc]="imgSrc3" alt="" width="50" height="50" class="mx-6" />
    </div>
    <div class="flex justify-between mx-10 mt-3">
      <div class="flex justify-center">
        <div class="relative">
          <img
            [ngSrc]="imgSrc4"
            alt=""
            width="30"
            height="30"
            class="{{ bgClass }} absolute rounded-md p-1"
            (click)="addUser(input)"
          />
          <input
            #input
            type="text"
            placeholder="Enter user #id to change"
            class="border rounded-md p-1.5 transition-all duration-300 ease-in-out h-[30px] w-auto ml-[34px]"
            (keydown.enter)="addUser(input)"
          />
        </div>
      </div>
      <div class="flex justify-end space-x-1">
        <button
          type="button"
          class="rounded-md {{ bgClass }} text-white px-2 text-xs"
          (click)="onSubmit()"
        >
          Submit
        </button>
        <button type="button" class="rounded-md bg-red-500 text-white px-1">
          <img [ngSrc]="imgSrc5" alt="" width="22" height="22" />
        </button>
      </div>
    </div>
    <form
      class="mx-10 mt-4 h-[calc(100%-10rem)] {{ bgClass2 }} border rounded-md"
      [formGroup]="dynamicForm"
    >
      <div class="p-1">
        @for(user of userArray; track i; let i = $index) {
        <div
          class="w-full bg-white h-10 rounded-md flex items-center justify-between px-3 text-xs font-medium space-x-2"
          [formGroupName]="user.id"
        >
          <div class="flex items-center space-x-1">
            <div class="font-bold">#id:</div>
            <div>
              {{ user.id }}
            </div>
          </div>
          <div class="flex items-center space-x-1">
            <div class="font-bold">Username:</div>
            <input
              placeholder="Enter usename"
              type="text"
              formControlName="username"
              class="max-w-10 p-1 border rounded-sm"
            />
          </div>
          <div class="flex items-center space-x-1">
            <div>Developer:</div>
            <div class="w-6 h-6 border rounded-md">
              <input
                placeholder="_"
                type="checkbox"
                class="w-6 h-6 absolute opacity-0"
                (change)="toggleDev(user)"
                [checked]="user.isDev"
              />
              @if(user.isDev) {
              <img
                [ngSrc]="imgSrc6"
                alt=""
                width="30"
                height="30"
                class="select-none"
              />
              }
            </div>
          </div>
          <div class="flex items-center space-x-1">
            <div>Admin:</div>
            <div class="w-6 h-6 border rounded-md">
              <input
                placeholder="_"
                type="checkbox"
                class="w-6 h-6 absolute opacity-0"
                (change)="toggleAdmin(user)"
                [checked]="user.isAdmin"
              />
              @if(user.isAdmin) {
              <img
                [ngSrc]="imgSrc6"
                alt=""
                width="30"
                height="30"
                class="select-none"
              />
              }
            </div>
          </div>
          <div class="flex items-center space-x-1">
            <div>Restore img:</div>
            <div
              class="w-6 h-6 rounded-md p-px border {{ getBgClass(user) }}"
              (click)="resetUserImage(user)"
            >
              <img
                [ngSrc]="imgSrc7"
                alt=""
                width="30"
                height="30"
                class="select-none"
              />
            </div>
          </div>
        </div>
        }
      </div>
    </form>
  </div>
</div>
